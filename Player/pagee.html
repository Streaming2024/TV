<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="https://nirutv.online/Scripts/clicks.js"></script>
<link href="https://nirutv.online/logo/favicon.png" rel="icon" type="image/x-icon"/>
<title>LIVE Page</title>
<style>
/* ====== Styles are exactly the same as your original code ====== */
:root {
    --bg-color: #f5f5f5;
    --text-color: #333;
    --container-bg: #ffffff;
    --header-bg: #ffffff;
    --notice-bg: #e0e0e0;
    --disclaimer-bg: #d4d2cb;
    --btn-primary: #ff0011;
    --btn-secondary: #007BFF;
    --btn-text: white;
    --shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.dark-mode {
    --bg-color: #1a1a1a;
    --text-color: #f0f0f0;
    --container-bg: #2d2d2d;
    --header-bg: #2d2d2d;
    --notice-bg: #444;
    --disclaimer-bg: #3c3c3c;
    --btn-primary: #ff5252;
    --btn-secondary: #4a8eff;
    --btn-text: #f0f0f0;
    --shadow: 0 2px 10px rgba(0,0,0,0.3);
}

/* ... all your original CSS here ... (unchanged) */
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- Anti-Adblock Popup -->
<div class="adb" id="adb">
    <div class="adbs">
        <h3>Adblock Detected</h3>
        <p>To Continue YoNoTV, Please Turnoff/Disable Adblocker. We really appreciate your support.</p>
    </div>
</div>

<!-- Redirect Notification -->
<div class="redirect-notification" id="redirect-notification">
    <i class="fas fa-info-circle"></i> <span id="notification-text">Advertisement will begin in 5 seconds…</span>
</div>

<div class="container">
    <!-- Header Image with Link -->
    <div class="header">
        <a href="https://yonotvsports.com" target="_blank">
            <img src="https://nirutv.online/logo/logo.png" alt="YoNoTV Live Sports" class="header-image">
        </a>
    </div>
    
    <!-- Top Controls (Refresh + Theme Toggle) -->
    <div class="top-controls">
        <button class="control-btn" id="refresh-btn">
            <i class="fas fa-sync-alt"></i> Refresh
        </button>
        
        <button class="control-btn theme-toggle" id="theme-toggle">
            <i class="fas fa-moon"></i> Dark Mode
        </button>
    </div>
    
    <div class="notice">Wait for Loading & Skip 1–2 ads (press back)</div>
    
    <!-- Video Container -->
    <div class="video-container">
        <iframe 
            id="video-frame" 
            sandbox="allow-scripts allow-forms" 
            allowfullscreen
        ></iframe>
        <button class="fullscreen-btn" id="fullscreen-button"><i class="fas fa-expand"></i> Fullscreen</button>
    </div>
    
    <!-- Chat Control -->
    <div class="chat-control">
        <button class="chat-btn" id="chat-toggle-btn">
            <i class="fas fa-comment-slash"></i> Hide Chat
        </button>
    </div>
    
    <!-- Chat is now always visible by default -->
    <iframe id="chat-frame"></iframe>
    
    <!-- Disclaimer Section -->
    <div class="disclaimer">
        <strong>Legal Disclaimer</strong>
        <p><b>Content Hosting:</b> YoNo TV does not host or upload any video content. All streams are embedded from publicly available third-party sources.</p>
        <p><b>Copyright Notice:</b> We do not claim ownership of any content displayed on this platform. All trademarks, logos, and media belong to their respective owners.</p>
        <p><b>Legal Responsibility:</b> YoNoTV is not responsible for the legality of content hosted by third parties. Users must ensure content access legality in their region.</p>
        <p><b>DMCA Compliance:</b> If you are a copyright owner and believe content infringes your rights, please contact the hosting provider directly. We will respond to proper DMCA requests.</p>
        <p><b>Contact Information:</b> For any inquiries, please email us at yonotvlive@gmail.com.</p>
    </div>
</div>

<script>
/* ===== JS Updates ===== */

// Load video from URL param
const urlParams = new URLSearchParams(window.location.search);
const src = urlParams.get('src');
const videoFrame = document.getElementById('video-frame');
videoFrame.src = src ? src : "about:blank";

// Prevent iframe popups
videoFrame.onload = () => {
    try {
        const iframeWindow = videoFrame.contentWindow;
        if (iframeWindow) {
            iframeWindow.open = function() { 
                console.log("Popup blocked"); 
                return null; 
            };
        }
    } catch(e) {
        // Cross-origin iframe will throw, ignore
    }
};

// YouTube Chat URL
const youtubeChatUrl = "https://www.youtube.com/live_chat?v=CcpYwQ1QiDY&embed_domain=nirutv.online";
function loadYouTubeChat() {
    const chatFrame = document.getElementById('chat-frame');
    chatFrame.src = youtubeChatUrl;
}

// Theme toggle & refresh button
const themeToggle = document.getElementById('theme-toggle');
document.body.classList.remove('dark-mode');
themeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
localStorage.removeItem('theme');

themeToggle.addEventListener('click', function() {
    document.body.classList.toggle('dark-mode');
    if (document.body.classList.contains('dark-mode')) {
        themeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
        localStorage.setItem('theme', 'dark');
    } else {
        themeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
        localStorage.setItem('theme', 'light');
    }
});

document.getElementById('refresh-btn').addEventListener('click', function() {
    location.reload();
});

// Fullscreen
const fullscreenButton = document.getElementById('fullscreen-button');
const videoContainer = document.querySelector('.video-container');
function toggleFullscreen() {
    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    if (isMobile) {
        if (videoContainer.requestFullscreen) videoContainer.requestFullscreen();
        else if (videoContainer.webkitRequestFullscreen) videoContainer.webkitRequestFullscreen();
        else if (videoContainer.msRequestFullscreen) videoContainer.msRequestFullscreen();
        if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape').catch(()=>{console.log("Orientation lock not supported");});
        }
        fullscreenButton.style.display = 'none';
    } else {
        if (videoFrame.requestFullscreen) videoFrame.requestFullscreen();
        else if (videoFrame.webkitRequestFullscreen) videoFrame.webkitRequestFullscreen();
        else if (videoFrame.msRequestFullscreen) videoFrame.msRequestFullscreen();
    }
}
fullscreenButton.addEventListener('click', toggleFullscreen);
function handleOrientationChange() {
    if (window.matchMedia("(orientation: landscape)").matches) {
        videoContainer.style.maxHeight = '80vh';
    } else videoContainer.style.maxHeight = 'none';
}
handleOrientationChange();
window.addEventListener('orientationchange', handleOrientationChange);
window.addEventListener('resize', handleOrientationChange);
document.addEventListener('fullscreenchange', function() {
    if (!document.fullscreenElement && /Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        if (screen.orientation && screen.orientation.unlock) screen.orientation.unlock();
        fullscreenButton.style.display = 'block';
    }
});

// Chat toggle
let chatVisible = true;
const chatToggleBtn = document.getElementById('chat-toggle-btn');
chatToggleBtn.addEventListener('click', function() {
    const chatFrame = document.getElementById('chat-frame');
    if (chatVisible) {
        chatFrame.style.display = "none";
        chatToggleBtn.innerHTML = '<i class="fas fa-comment"></i> Show Chat';
        chatVisible = false;
    } else {
        chatFrame.style.display = "block";
        chatToggleBtn.innerHTML = '<i class="fas fa-comment-slash"></i> Hide Chat';
        chatVisible = true;
        loadYouTubeChat();
    }
});

// Anti-Adblock
async function detectAdBlock() {
    let adBlockEnabled = false;
    const googleAdUrl = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
    try {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 3000);
        await fetch(new Request(googleAdUrl), { signal: controller.signal, cache: 'no-store' })
            .then(() => clearTimeout(timeoutId))
            .catch(e => { if(e.name !== 'AbortError') adBlockEnabled = true; });
    } catch(e) { adBlockEnabled = true; }
    if (adBlockEnabled) {
        document.getElementById("adb").style.display = "block";
        if (videoFrame.src && videoFrame.src !== "about:blank") videoFrame.src = "about:blank";
    }
}

// Redirects
function hideRedirectNotification() {
    const notification = document.getElementById('redirect-notification');
    notification.classList.add('hiding');
    setTimeout(() => { notification.style.display = 'none'; notification.classList.remove('hiding'); }, 500);
}
function setupRedirects() {
    let redirectHistory = JSON.parse(localStorage.getItem('redirectHistory') || '{"count": 0, "lastReset": ' + Date.now() + '}');
    const twelveHours = 12 * 60 * 60 * 1000;
    if (Date.now() - redirectHistory.lastReset > twelveHours) {
        redirectHistory = {"count": 0, "lastReset": Date.now()};
        localStorage.setItem('redirectHistory', JSON.stringify(redirectHistory));
    }
    if (redirectHistory.count >= 2) return;

    setTimeout(() => {
        const notification = document.getElementById('redirect-notification');
        const notificationText = document.getElementById('notification-text');
        notificationText.textContent = "You will be redirected to our VIP page in 5 seconds...";
        notification.style.display = 'block';
        const redirectTimeout = setTimeout(() => {
            redirectHistory.count++;
            redirectHistory.lastReset = Date.now();
            localStorage.setItem('redirectHistory', JSON.stringify(redirectHistory));
            window.location.href = 'https://nirutv.online/VIP/ads.html';
        }, 5000);
        window.addEventListener('beforeunload', function() { clearTimeout(redirectTimeout); hideRedirectNotification(); });
    }, 60000);

    setTimeout(() => {
        redirectHistory = JSON.parse(localStorage.getItem('redirectHistory') || '{"count": 0, "lastReset": ' + Date.now() + '}');
        if (redirectHistory.count >= 2) return;
        const notification = document.getElementById('redirect-notification');
        const notificationText = document.getElementById('notification-text');
        notificationText.textContent = "You will be redirected to our VIP page in 5 seconds...";
        notification.style.display = 'block';
        const redirectTimeout = setTimeout(() => {
            redirectHistory.count++;
            redirectHistory.lastReset = Date.now();
            localStorage.setItem('redirectHistory', JSON.stringify(redirectHistory));
            window.location.href = 'https://nirutv.online/VIP/ads.html';
        }, 5000);
        window.addEventListener('beforeunload', function() { clearTimeout(redirectTimeout); hideRedirectNotification(); });
    }, 180000);
}

window.addEventListener('load', function() {
    loadYouTubeChat();
    setTimeout(detectAdBlock, 2000);
    setupRedirects();
});
</script>

<center>
<script type="text/javascript" src="//widget.supercounters.com/ssl/online_i.js"></script>
<script type="text/javascript">sc_online_i(1704055,"ffffff","e61c1c");</script>
<br><noscript><a href="https://www.supercounters.com/">free online counter</a></noscript>
</center>
</body>
</html>
